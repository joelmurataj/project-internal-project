<h1>Employees</h1>
<br>
<button (click)="filter()" mat-button color="primary"><i class="material-icons md-24">
    list
  </i></button>
<button (click)="createUser()" mat-fab color="primary" style="left: 1000px"><i class="material-icons">
    add
  </i></button>
  <br><br>
<div class="container">
    <div *ngIf='!tableIsEmpty'>
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">


    <ng-container matColumnDef="firstName">
      <th mat-header-cell *matHeaderCellDef> FirstName </th>
      <td mat-cell *matCellDef="let user" (click)="infoOfEmployee(user.id)"> {{user.firstName}} </td>
    </ng-container>


    <ng-container matColumnDef="lastName">
      <th mat-header-cell *matHeaderCellDef> LastName </th>
      <td mat-cell *matCellDef="let user" (click)="infoOfEmployee(user.id)"> {{user.lastName}}</td>

    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef> email </th>
      <td mat-cell *matCellDef="let user" (click)="infoOfEmployee(user.id)"> {{user.email}} </td>
    </ng-container>


    <ng-container matColumnDef="startDate">
      <th mat-header-cell *matHeaderCellDef> Start Date </th>
      <td mat-cell *matCellDef="let user" (click)="infoOfEmployee(user.id)"> {{user.startDate | date:'yyyy-MM-dd'}} </td>
    </ng-container>

    <ng-container matColumnDef="departament">
      <th mat-header-cell *matHeaderCellDef> Departament: </th>
      <td mat-cell *matCellDef="let user" (click)="infoOfEmployee(user.id)"> {{user.departamentName}} </td>
    </ng-container>

    <!-- <ng-container matColumnDef="pricePerHour">
      <th mat-header-cell *matHeaderCellDef> pricePerHour </th>
      <td mat-cell *matCellDef="let user"> {{user.pricePerHour}} </td>
    </ng-container> -->

    <ng-container matColumnDef="rank" >
      <th mat-header-cell *matHeaderCellDef> Rank: </th>
      <td mat-cell *matCellDef="let user" style="width: 10%">
        <div *ngIf='!editable || userId !== user.id' (click)="update(user.id)" >
          {{user.rankName}}
        </div>
        <div *ngIf='editable && userId === user.id'>
          <mat-form-field style="width: 50%">
            <mat-select placeholder="Rank" [(value)]="user.rankId">
              <mat-option *ngFor="let rank of ranks" [value]="rank.idRank">
                {{rank.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="currentProject">
      <th mat-header-cell *matHeaderCellDef> Current Project: </th>
      <td mat-cell *matCellDef="let user" (click)="infoOfEmployee(user.id)"> {{user.currentProject}} </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef> </th>
      <td mat-cell *matCellDef="let user" >
        <!-- <div *ngIf='!editable'><button (click)="update(user.id)" mat-button color="primary"><i
              class="material-icons md-24">
              edit
            </i></button> 
          </div> -->
        <div *ngIf='editable && userId === user.id'><button (click)="updateRankOFemployee(user)" mat-button
            color="primary"><i class="material-icons md-24">
              edit
            </i></button></div>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
  </table>
  <!-- (click)="getInfoOfProject(project.id)" -->
  <mat-paginator [pageSizeOptions]="[5 , 10 ,20]" showFirstLastButtons></mat-paginator>
</div>
<div *ngIf='tableIsEmpty'>No projects were found</div>
</div>
<!-- <button (click)="createUser()" mat-fab color="primary"><i class="material-icons">
  add
</i></button> -->